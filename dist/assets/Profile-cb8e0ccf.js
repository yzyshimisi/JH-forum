import{_ as K,a as W}from"./post-item.vue_vue_type_style_index_0_lang-6952fff0.js";import{_ as X}from"./post-skeleton-6615a5be.js";import{_ as Y}from"./main-nav.vue_vue_type_style_index_0_lang-1e1697bf.js";import{u as Z}from"./vuex-473b3783.js";import{b as ee}from"./vue-router-b8e3382f.js";import{B as g,_ as ae}from"./index-32f159bc.js";import{b as te}from"./formatTime-4210fcd1.js";import{d as se,r as c,j as oe,w as ne,c as _,V as n,_ as r,Q as k,a1 as h,O as w,o as l,a as u,M as v,e as le,F as N,a4 as U}from"./@vue-e0e89260.js";import{F as re,G as ue,o as ie,O as ce,f as _e,g as pe,I as me,H as ve}from"./naive-ui-62663ad7.js";import"./content-4a84e371.js";import"./@vicons-0524c43e.js";import"./paopao-video-player-aa5e8b3f.js";import"./copy-to-clipboard-1dd3075d.js";import"./toggle-selection-93f4ad84.js";import"./vooks-a50491fd.js";import"./evtd-b614532e.js";import"./axios-4a70c6fc.js";/* empty css               */import"./seemly-76b7b838.js";import"./vueuc-59ca65c3.js";import"./@css-render-580d83ec.js";import"./vdirs-b0483831.js";import"./@juggle-41516555.js";import"./css-render-6a5c5852.js";import"./@emotion-8a8e73f6.js";import"./lodash-es-8412e618.js";import"./treemate-25c27bff.js";import"./async-validator-dee29e8b.js";import"./date-fns-975a2d8f.js";import"./moment-2ab8298d.js";const de={class:"profile-baseinfo"},fe={class:"avatar"},ge={class:"base-info"},he={class:"username"},be={class:"userinfo"},ke={class:"info-item"},we={class:"info-item"},ye={class:"userinfo"},Ie={class:"info-item"},Pe={class:"info-item"},Te={key:0,class:"skeleton-wrap"},ze={key:1},Me={key:0,class:"empty-wrap"},qe={key:1},xe={key:2},Be={key:1,class:"pagination-wrap"},Se=se({__name:"Profile",setup(Ve){const t=Z(),m=ee(),s=c(!1),o=c([]),b=c("post"),x=c(+m.query.p||1),B=c(1),S=c(1),V=c(1),$=c(1),a=c(+m.query.p||1),i=c(20),p=c(0),y=()=>{switch(b.value){case"post":I();break;case"comment":P();break;case"highlight":T();break;case"media":z();break;case"star":M();break}},I=()=>{s.value=!0,g({username:t.state.userInfo.username,style:"post",page:a.value,page_size:i.value}).then(e=>{s.value=!1,o.value=e.list||[],p.value=Math.ceil(e.pager.total_rows/i.value),window.scrollTo(0,0)}).catch(e=>{o.value=[],s.value=!1})},P=()=>{s.value=!0,g({username:t.state.userInfo.username,style:"comment",page:a.value,page_size:i.value}).then(e=>{s.value=!1,o.value=e.list||[],p.value=Math.ceil(e.pager.total_rows/i.value),window.scrollTo(0,0)}).catch(e=>{o.value=[],s.value=!1})},T=()=>{s.value=!0,g({username:t.state.userInfo.username,style:"highlight",page:a.value,page_size:i.value}).then(e=>{s.value=!1,o.value=e.list||[],p.value=Math.ceil(e.pager.total_rows/i.value),window.scrollTo(0,0)}).catch(e=>{o.value=[],s.value=!1})},z=()=>{s.value=!0,g({username:t.state.userInfo.username,style:"media",page:a.value,page_size:i.value}).then(e=>{s.value=!1,o.value=e.list||[],p.value=Math.ceil(e.pager.total_rows/i.value),window.scrollTo(0,0)}).catch(e=>{o.value=[],s.value=!1})},M=()=>{s.value=!0,g({username:t.state.userInfo.username,style:"star",page:a.value,page_size:i.value}).then(e=>{s.value=!1,o.value=e.list||[],p.value=Math.ceil(e.pager.total_rows/i.value),window.scrollTo(0,0)}).catch(e=>{o.value=[],s.value=!1})},D=e=>{switch(b.value=e,b.value){case"post":a.value=x.value,I();break;case"comment":a.value=B.value,P();break;case"highlight":a.value=S.value,T();break;case"media":a.value=V.value,z();break;case"star":a.value=$.value,M();break}},F=e=>{switch(a.value=e,b.value){case"post":x.value=e,I();break;case"comment":B.value=a.value,P();break;case"highlight":S.value=a.value,T();break;case"media":V.value=a.value,z();break;case"star":$.value=a.value,M();break}};return oe(()=>{y()}),ne(()=>({path:m.path,query:m.query,refresh:t.state.refresh}),(e,q)=>{if(e.refresh!==q.refresh){a.value=+m.query.p||1,setTimeout(()=>{y()},0);return}q.path!=="/post"&&e.path==="/profile"&&(a.value=+m.query.p||1,setTimeout(()=>{y()},0))}),(e,q)=>{const H=Y,O=ie,R=ce,d=_e,j=pe,E=X,G=me,L=K,C=ve,Q=W,A=re,J=ue;return l(),_("div",null,[n(H,{title:"主页"}),r(t).state.userInfo.id>0?(l(),k(A,{key:0,class:"main-content-wrap profile-wrap",bordered:""},{default:h(()=>[u("div",de,[u("div",fe,[n(O,{size:72,src:r(t).state.userInfo.avatar},null,8,["src"])]),u("div",ge,[u("div",he,[u("strong",null,v(r(t).state.userInfo.nickname),1),u("span",null," @"+v(r(t).state.userInfo.username),1),r(t).state.userInfo.is_admin?(l(),k(R,{key:0,class:"top-tag",type:"error",size:"small",round:""},{default:h(()=>[le(" 管理员 ")]),_:1})):w("",!0)]),u("div",be,[u("span",ke,"UID. "+v(r(t).state.userInfo.id),1),u("span",we,v(r(te)(r(t).state.userInfo.created_on))+" 加入",1)]),u("div",ye,[u("span",Ie,"关注  "+v(r(t).state.userInfo.follows),1),u("span",Pe,"粉丝  "+v(r(t).state.userInfo.followings),1)])])]),n(j,{class:"profile-tabs-wrap",type:"line",animated:"","onUpdate:value":D},{default:h(()=>[n(d,{name:"post",tab:"泡泡"}),n(d,{name:"comment",tab:"评论"}),n(d,{name:"highlight",tab:"亮点"}),n(d,{name:"media",tab:"图文"}),n(d,{name:"star",tab:"喜欢"})]),_:1}),s.value?(l(),_("div",Te,[n(E,{num:i.value},null,8,["num"])])):(l(),_("div",ze,[o.value.length===0?(l(),_("div",Me,[n(G,{size:"large",description:"暂无数据"})])):w("",!0),r(t).state.desktopModelShow?(l(),_("div",qe,[(l(!0),_(N,null,U(o.value,f=>(l(),k(C,{key:f.id},{default:h(()=>[n(L,{post:f},null,8,["post"])]),_:2},1024))),128))])):(l(),_("div",xe,[(l(!0),_(N,null,U(o.value,f=>(l(),k(C,{key:f.id},{default:h(()=>[n(Q,{post:f},null,8,["post"])]),_:2},1024))),128))]))]))]),_:1})):w("",!0),p.value>0?(l(),_("div",Be,[n(J,{page:a.value,"onUpdate:page":F,"page-slot":r(t).state.collapsedRight?5:8,"page-count":p.value},null,8,["page","page-slot","page-count"])])):w("",!0)])}}});const ia=ae(Se,[["__scopeId","data-v-2be5a578"]]);export{ia as default};
