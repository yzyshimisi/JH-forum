import{_ as J,a as K}from"./post-item.vue_vue_type_style_index_0_lang-a71d385c.js";import{_ as W}from"./post-skeleton-0f731355.js";import{_ as X}from"./main-nav.vue_vue_type_style_index_0_lang-75e5a344.js";import{u as Y}from"./vuex-473b3783.js";import{b as Z}from"./vue-router-b8e3382f.js";import{B as g,_ as ee}from"./index-9b430c9c.js";import{d as ae,r as u,j as te,w as se,c,V as n,_,Q as z,a1 as k,O as q,o as l,a as i,M as h,F as V,a4 as F}from"./@vue-e0e89260.js";import{F as oe,G as ne,o as le,f as re,g as ue,I as ie,H as ce}from"./naive-ui-62663ad7.js";import"./content-5374027e.js";import"./@vicons-0524c43e.js";import"./paopao-video-player-aa5e8b3f.js";import"./formatTime-cdf4e6f1.js";import"./moment-2ab8298d.js";import"./copy-to-clipboard-1dd3075d.js";import"./toggle-selection-93f4ad84.js";import"./vooks-a50491fd.js";import"./evtd-b614532e.js";import"./axios-4a70c6fc.js";/* empty css               */import"./seemly-76b7b838.js";import"./vueuc-59ca65c3.js";import"./@css-render-580d83ec.js";import"./vdirs-b0483831.js";import"./@juggle-41516555.js";import"./css-render-6a5c5852.js";import"./@emotion-8a8e73f6.js";import"./lodash-es-8412e618.js";import"./treemate-25c27bff.js";import"./async-validator-dee29e8b.js";import"./date-fns-975a2d8f.js";const _e={class:"profile-baseinfo"},pe={class:"avatar"},me={class:"base-info"},ve={class:"username"},de={class:"userinfo"},ge={class:"info-item"},he={class:"info-item"},fe={class:"info-item"},ke={key:0,class:"skeleton-wrap"},we={key:1},be={key:0,class:"empty-wrap"},ye={key:1},Pe={key:2},Ie={key:1,class:"pagination-wrap"},Me=ae({__name:"Profile",setup(Te){const s=Y(),m=Z(),t=u(!1),o=u([]),f=u("post"),x=u(+m.query.p||1),B=u(1),S=u(1),$=u(1),C=u(1),a=u(+m.query.p||1),r=u(20),p=u(0),w=()=>{switch(f.value){case"post":b();break;case"comment":y();break;case"highlight":P();break;case"media":I();break;case"star":M();break}},b=()=>{t.value=!0,g({username:s.state.userInfo.username,style:"post",page:a.value,page_size:r.value}).then(e=>{t.value=!1,o.value=e.list||[],p.value=Math.ceil(e.pager.total_rows/r.value),window.scrollTo(0,0)}).catch(e=>{o.value=[],t.value=!1})},y=()=>{t.value=!0,g({username:s.state.userInfo.username,style:"comment",page:a.value,page_size:r.value}).then(e=>{t.value=!1,o.value=e.list||[],p.value=Math.ceil(e.pager.total_rows/r.value),window.scrollTo(0,0)}).catch(e=>{o.value=[],t.value=!1})},P=()=>{t.value=!0,g({username:s.state.userInfo.username,style:"highlight",page:a.value,page_size:r.value}).then(e=>{t.value=!1,o.value=e.list||[],p.value=Math.ceil(e.pager.total_rows/r.value),window.scrollTo(0,0)}).catch(e=>{o.value=[],t.value=!1})},I=()=>{t.value=!0,g({username:s.state.userInfo.username,style:"media",page:a.value,page_size:r.value}).then(e=>{t.value=!1,o.value=e.list||[],p.value=Math.ceil(e.pager.total_rows/r.value),window.scrollTo(0,0)}).catch(e=>{o.value=[],t.value=!1})},M=()=>{t.value=!0,g({username:s.state.userInfo.username,style:"star",page:a.value,page_size:r.value}).then(e=>{t.value=!1,o.value=e.list||[],p.value=Math.ceil(e.pager.total_rows/r.value),window.scrollTo(0,0)}).catch(e=>{o.value=[],t.value=!1})},N=e=>{switch(f.value=e,f.value){case"post":a.value=x.value,b();break;case"comment":a.value=B.value,y();break;case"highlight":a.value=S.value,P();break;case"media":a.value=$.value,I();break;case"star":a.value=C.value,M();break}},D=e=>{switch(a.value=e,f.value){case"post":x.value=e,b();break;case"comment":B.value=a.value,y();break;case"highlight":S.value=a.value,P();break;case"media":$.value=a.value,I();break;case"star":C.value=a.value,M();break}};return te(()=>{w()}),se(()=>({path:m.path,query:m.query,refresh:s.state.refresh}),(e,T)=>{if(e.refresh!==T.refresh){a.value=+m.query.p||1,setTimeout(()=>{w()},0);return}T.path!=="/post"&&e.path==="/profile"&&(a.value=+m.query.p||1,setTimeout(()=>{w()},0))}),(e,T)=>{const H=X,R=le,v=re,j=ue,E=W,G=ie,L=J,U=ce,O=K,Q=oe,A=ne;return l(),c("div",null,[n(H,{title:"主页"}),_(s).state.userInfo.id>0?(l(),z(Q,{key:0,class:"main-content-wrap profile-wrap",bordered:""},{default:k(()=>[i("div",_e,[i("div",pe,[n(R,{size:"large",src:_(s).state.userInfo.avatar},null,8,["src"])]),i("div",me,[i("div",ve,[i("strong",null,h(_(s).state.userInfo.nickname),1),i("span",null," @"+h(_(s).state.userInfo.username),1)]),i("div",de,[i("span",ge,"UID. "+h(_(s).state.userInfo.id),1),i("span",he,"关注  "+h(_(s).state.userInfo.follows),1),i("span",fe,"粉丝  "+h(_(s).state.userInfo.followings),1)])])]),n(j,{class:"profile-tabs-wrap",type:"line",animated:"","onUpdate:value":N},{default:k(()=>[n(v,{name:"post",tab:"泡泡"}),n(v,{name:"comment",tab:"评论"}),n(v,{name:"highlight",tab:"亮点"}),n(v,{name:"media",tab:"图文"}),n(v,{name:"star",tab:"喜欢"})]),_:1}),t.value?(l(),c("div",ke,[n(E,{num:r.value},null,8,["num"])])):(l(),c("div",we,[o.value.length===0?(l(),c("div",be,[n(G,{size:"large",description:"暂无数据"})])):q("",!0),_(s).state.desktopModelShow?(l(),c("div",ye,[(l(!0),c(V,null,F(o.value,d=>(l(),z(U,{key:d.id},{default:k(()=>[n(L,{post:d},null,8,["post"])]),_:2},1024))),128))])):(l(),c("div",Pe,[(l(!0),c(V,null,F(o.value,d=>(l(),z(U,{key:d.id},{default:k(()=>[n(O,{post:d},null,8,["post"])]),_:2},1024))),128))]))]))]),_:1})):q("",!0),p.value>0?(l(),c("div",Ie,[n(A,{page:a.value,"onUpdate:page":D,"page-slot":_(s).state.collapsedRight?5:8,"page-count":p.value},null,8,["page","page-slot","page-count"])])):q("",!0)])}}});const sa=ee(Me,[["__scopeId","data-v-2365d298"]]);export{sa as default};
