import{p as F,a as H,_ as P,b as I,c as R}from"./content-be850479.js";import{d as A,n as b,a1 as E,o as i,c as u,L as a,a6 as K,Y as t,$ as n,a as p,F as Y,a2 as G,a0 as v,e as _,M as c,K as l,O as r}from"./@vue-ca177dbe.js";import{u as J}from"./vuex-d28e9067.js";import{b as Q,u as U}from"./vue-router-88cc84d1.js";import{b as x}from"./formatTime-000dbebb.js";import{a as W}from"./copy-to-clipboard-ca358197.js";import{u as X,j as Z,l as tt,m as et}from"./@vicons-a45d17e4.js";import{o as st,M as ot,j as nt,e as at,O as it,a as rt,L as ct}from"./naive-ui-2035804c.js";const pt={class:"post-item"},lt={class:"nickname-wrap"},_t={class:"username-wrap"},mt={key:3},ut={class:"timestamp-mobile"},dt={class:"item-header-extra"},ht={key:0,class:"timestamp"},gt=["innerHTML"],kt={class:"opt-item"},ft={class:"opt-item"},zt=A({__name:"post-item",props:{post:null},setup(C){const $=C;Q();const g=U(),k=J(),T=b(()=>[{label:"复制链接",key:"copyTweetLink"}]),z=o=>{switch(o){case"copyTweetLink":W(`${window.location.origin}/#/post?id=${e.value.id}`),window.$message.success("链接已复制到剪贴板");break}},e=b(()=>{let o=Object.assign({texts:[],imgs:[],videos:[],links:[],attachments:[],charge_attachments:[]},$.post);return o.contents.map(s=>{(+s.type==1||+s.type==2)&&o.texts.push(s),+s.type==3&&o.imgs.push(s),+s.type==4&&o.videos.push(s),+s.type==6&&o.links.push(s),+s.type==7&&o.attachments.push(s),+s.type==8&&o.charge_attachments.push(s)}),o}),f=o=>{g.push({name:"post",query:{id:o}})},M=(o,s)=>{if(o.target.dataset.detail){const m=o.target.dataset.detail.split(":");if(m.length===2){k.commit("refresh"),m[0]==="tag"?g.push({name:"home",query:{q:m[1],t:"tag"}}):g.push({name:"user",query:{username:m[1]}});return}}f(s)};return(o,s)=>{const m=st,L=E("router-link"),y=ot,d=nt,O=at,q=it,w=H,S=P,B=I,N=R,V=rt,j=ct;return i(),u("div",pt,[a(j,{"content-indented":""},K({avatar:n(()=>[a(m,{round:"",size:30,src:t(e).user.avatar},null,8,["src"])]),header:n(()=>[p("span",lt,[a(L,{onClick:s[0]||(s[0]=v(()=>{},["stop"])),class:"username-link",to:{name:"user",query:{username:t(e).user.username}}},{default:n(()=>[_(c(t(e).user.nickname),1)]),_:1},8,["to"])]),p("span",_t," @"+c(t(e).user.username),1),t(e).is_top?(i(),l(y,{key:0,class:"top-tag",type:"warning",size:"small",round:""},{default:n(()=>[_(" 置顶 ")]),_:1})):r("",!0),t(e).visibility==1?(i(),l(y,{key:1,class:"top-tag",type:"error",size:"small",round:""},{default:n(()=>[_(" 私密 ")]),_:1})):r("",!0),t(e).visibility==2?(i(),l(y,{key:2,class:"top-tag",type:"info",size:"small",round:""},{default:n(()=>[_(" 好友可见 ")]),_:1})):r("",!0),t(k).state.desktopModelShow?r("",!0):(i(),u("div",mt,[p("span",ut,c(t(x)(t(e).created_on))+" "+c(t(e).ip_loc),1)]))]),"header-extra":n(()=>[p("div",dt,[t(k).state.desktopModelShow?(i(),u("span",ht,c(t(e).ip_loc?t(e).ip_loc+" · ":t(e).ip_loc)+" "+c(t(x)(t(e).created_on)),1)):r("",!0),a(q,{placement:"bottom-end",trigger:"click",size:"small",options:t(T),onSelect:z},{default:n(()=>[a(O,{quaternary:"",circle:""},{icon:n(()=>[a(d,null,{default:n(()=>[a(t(X))]),_:1})]),_:1})]),_:1},8,["options"])])]),footer:n(()=>[t(e).attachments.length>0?(i(),l(w,{key:0,attachments:t(e).attachments},null,8,["attachments"])):r("",!0),t(e).charge_attachments.length>0?(i(),l(w,{key:1,attachments:t(e).charge_attachments,price:t(e).attachment_price},null,8,["attachments","price"])):r("",!0),t(e).imgs.length>0?(i(),l(S,{key:2,imgs:t(e).imgs},null,8,["imgs"])):r("",!0),t(e).videos.length>0?(i(),l(B,{key:3,videos:t(e).videos},null,8,["videos"])):r("",!0),t(e).links.length>0?(i(),l(N,{key:4,links:t(e).links},null,8,["links"])):r("",!0)]),action:n(()=>[a(V,{justify:"space-between"},{default:n(()=>[p("div",kt,[a(d,{size:"18",class:"opt-item-icon"},{default:n(()=>[a(t(Z))]),_:1}),_(" "+c(t(e).upvote_count),1)]),p("div",{class:"opt-item",onClick:s[3]||(s[3]=v(h=>f(t(e).id),["stop"]))},[a(d,{size:"18",class:"opt-item-icon"},{default:n(()=>[a(t(tt))]),_:1}),_(" "+c(t(e).comment_count),1)]),p("div",ft,[a(d,{size:"18",class:"opt-item-icon"},{default:n(()=>[a(t(et))]),_:1}),_(" "+c(t(e).collection_count),1)])]),_:1})]),_:2},[t(e).texts.length>0?{name:"description",fn:n(()=>[p("div",{onClick:s[2]||(s[2]=h=>f(t(e).id))},[(i(!0),u(Y,null,G(t(e).texts,h=>(i(),u("span",{key:h.id,class:"post-text",onClick:s[1]||(s[1]=v(D=>M(D,t(e).id),["stop"])),innerHTML:t(F)(h.content).content},null,8,gt))),128))])]),key:"0"}:void 0]),1024)])}}});export{zt as _};
